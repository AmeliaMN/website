<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

<meta property="og:description"
    content="
        As usual toward the end of the semester, my students begin working in earnest on their final projects. And as usual, this results in my selective amnesia abo...
      ">
<meta property="og:url"
    content="https://www.amelia.mn/blog/teaching/2016/11/16/CensusRant.html" />
  
  
    <meta property="og:image" content="https://www.amelia.mn/img/FactFinder.png" />
    <meta name="twitter:image" content="https://www.amelia.mn/img/FactFinder.png" />
    <meta property="og:title" content="Census data: A rant" />
    <meta property="og:type" content="article" />
  

  
	<meta name="description" content="Amelia McNamara, assistant professor of statistics in the Department of Computer & Information Sciences at the University of St Thomas" />
	
    <meta name="author" content="Amelia McNamara">
    <title>Amelia McNamara  | Blog   | Censusrant </title>
    <link rel="shortcut icon" href="https://www.amelia.mn/assets/ico/favicon.png">
    <link rel="stylesheet" href="https://www.amelia.mn/dist/font-awesome/css/font-awesome.min.css">
    <link href="https://www.amelia.mn/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://www.amelia.mn/dist/css/my.css" rel="stylesheet">
    
      <link href="https://www.amelia.mn/dist/css/post.css" rel="stylesheet">
      <link href="https://www.amelia.mn/dist/css/autumn.css" rel="stylesheet">
      <link href="https://www.amelia.mn/dist/css/bclear.css" rel="stylesheet">
    
    <link rel="alternate" type="application/rss+xml" title="Amelia McNamara" href="https://www.amelia.mn/blog/feed.xml">
  </head>
  <body>

<nav class="navbar navbar-default navbar-fixed-top" role="navigation">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#amelia">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">Amelia McNamara</a>
        </div>
        <div class="navbar-collapse collapse" id="amelia">
          <ul class="nav navbar-nav">
           
            	<li><a href="https://www.amelia.mn/index.html">home</a></li>
        	
        	
            	<li class="dropdown">
            
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">teaching <b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="https://www.amelia.mn/STAT360">STAT 360</a></li>
                <li><a href="https://www.amelia.mn/pastcourses.html">Past courses</a></li>
                <li class="divider">Resources</li>
                <li><a href="https://www.amelia.mn/Syntax-cheatsheet.pdf">R Syntax Comparison Cheatsheet</a></li>
                <li><a href="https://smithcollege-sds.github.io/sds-public/rmarkdown_problems.html">Troubleshooting RMarkdown</a></li>
              </ul>
              </li>
            
            	<li class="dropdown">
            
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">research <b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="https://www.amelia.mn/dissertation.html">My dissertation</a></li>
                <li><a href="https://www.amelia.mn/FoSP.html">The future of statistical programming</a></li>
                <li class="divider"></li>
                <li><a href="https://www.amelia.mn/writings.html">Writing</a></li>
                <li><a href="https://www.amelia.mn/presentations.html">Presentations</a></li>
                <li class="divider"></li>
              	<li><a href="https://www.amelia.mn/portfolio.html">Other projects</a></li>
              </ul>
              </li>
            
                <li><a href="https://www.amelia.mn/press.html">press</a></li>
              
              
              	<li class="active"><a href="https://www.amelia.mn/blog/">blog</a></li>
              
              </ul>
              <ul class="nav navbar-nav navbar-right">
				<li><a class="tooltip-test" data-placement="bottom" title="" data-original-title="email" href="mailto:amelia.mcnamara@stthomas.edu" target="_blank"><i class="fa fa-envelope fa-2x"></i></a></li>
				<li><a class="tooltip-test"  data-placement="bottom" title="" data-original-title="follow" href="http://www.twitter.com/AmeliaMN" target="_blank"><i class="fa fa-twitter fa-2x"></i></a></li>
				<li><a class="tooltip-test"  data-placement="bottom" title="" data-original-title="connect" href="http://www.linkedin.com/in/AmeliaMcNamara" target="_blank"><i class="fa fa-linkedin fa-2x"></i></a></li>
				<li><a class="tooltip-test"  data-placement="bottom" title="" data-original-title="friend" href="http://www.facebook.com/amelia.mcnamara" target="_blank"><i class="fa fa-facebook fa-2x"></i></a></li>
				<li><a class="tooltip-test"  data-placement="bottom" title="" data-original-title="add" href="http://plus.google.com/+AmeliaMcNamara" target="_blank"><i class="fa fa-google-plus fa-2x"></i></a></li>
				<li><a class="tooltip-test"  data-placement="bottom" title="" data-original-title="fork" href="https://github.com/AmeliaMN" target="_blank"><i class="fa fa-github fa-2x"></i></a></li>
          </ul>
        </div><!--/.nav-collapse -->
    </nav>

    <div class="container">
	<div class="row">&nbsp;</div>
	<div class="row">
		<div class="col-md-8">
			<h2>Census data: A rant</h2>
			<p class="meta">16 Nov 2016</p>

			<div class="post">
			<p>As usual toward the end of the semester, my students begin working in earnest on their final projects. And as usual, this results in my selective amnesia about <a href="http://www.census.gov">census.gov</a> being ruptured yet again. Looking for a way out, I turned to <a href="https://twitter.com/AmeliaMN/status/798620977202663424">twitter</a> and got some good recommendations. In case it’s useful to other teachers/people, I’ll share my thoughts.</p>

<p>(The tl;dr is that you probably want students to be using <a href="http://www.socialexplorer.com/">Social Explorer</a>, but read on for the full rant.)</p>

<!--more-->

<p>First, some motivation. A group of students in my class has found some interesting data at the state level, which they think may be related to demographic characteristics of states, like population, poverty level, education, racial makeup, etc. This is where my amnesia kicks in. “It should be really easy to find data like that!” I say. “Let’s go to the <a href="http://factfinder.census.gov/">American FactFinder website</a> and I’ll show you how it works.” We bumble around on the site for a while, clicking on “Data Main” (a page of screenshots and news) “Data tools and apps” (actually has the link to what we want, but buried among other unrelated things), etc. Finally I manage to find FactFinder main page. We select our geography (states) and dismiss the box that is trying to get us to add yet another geography. We search for “poverty” and voila! …the ugliest dataset you have ever seen.</p>

<p><a class="thumb" href="https://factfinder.census.gov/faces/tableservices/jsf/pages/productview.xhtml?pid=ACS_14_5YR_S1701&amp;prodType=table"><img src="https://www.amelia.mn/img/FactFinder.png" class="img-responsive" alt="An ugly table" /></a></p>

<p>I always encourage students to work with data programmatically, but even I have to admit that it would be easier to delete columns and add better names in a spreadsheet. The column names are in multiple <em>rows</em> for crying out loud! Plus, what you would like to be observations (states) are actually variables. I am now imagining the <code class="highlighter-rouge">gather</code>/<code class="highlighter-rouge">spread</code> in my future. I want students to understand data cleaning and wrangling, but I don’t want their first experience to be hellish. Even my heart is sinking, thinking about doing this all myself.</p>

<h2 id="apis">APIs</h2>

<p>Okay, so what are the alternatives? The Census does offer an API, so I signed up for an API key and started playing with some R packages recommended by folks on twitter. The most commonly-mentioned package was <code class="highlighter-rouge">acs</code> (a CRAN package), although I also heard about <code class="highlighter-rouge">acs14lite</code> and <code class="highlighter-rouge">censusapi</code> (both on GitHub and installable using <code class="highlighter-rouge">devtools</code>). Sadly, none of these packages have vignettes. I’ve been using R for almost 10 years, so yes, I could figure it out from the documentation, but it would take time (which I am short on) and isn’t something I can ask the students I have in this class to do.</p>

<p><a href="http://www.statschat.org.nz/">Thomas Lumley</a> pointed me to this blog post on <a href="http://dlab.berkeley.edu/blog/season-sharing-data-working-newly-released-census-2010-2014-acs-5-year-data-r">working with ACS data in R</a> which was much more readable. I’m not thinking about maps for this particular application, but I can read around that part. I was able to reproduce the code in the post (yeah!) and modify the first retrieval command to get data for states:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>stateDemo &lt;- acs14(geography='state', variable = c('B17021_001E'))
</code></pre>
</div>

<p>But, this isn’t the only variable I’m interested in! So, how do I learn what other variables I want? As far as I can tell, I have to go to the <a href="http://api.census.gov/">Census API site</a> and read <a href="http://api.census.gov/data/2015/acs1/variables.html">this table</a>. Say I’m interested in race. I can search the page for that word, but I get almost 5,000 results.</p>

<p><a class="thumb" href=""><img src="https://www.amelia.mn/img/RaceSearch.png" class="img-responsive" alt="Results of searching for `race.'" /></a></p>

<p>And even if I locate a variable I am interested in, the descriptions are pretty hard to parse.</p>

<p><a class="thumb" href=""><img src="https://www.amelia.mn/img/VariableDescription.png" class="img-responsive" alt="Variable description'" /></a></p>

<p>The result of this is that it would be all too easy to think you were getting one thing and actually request another. Plus, when you generate your list of variable strings like <code class="highlighter-rouge">B02001_009E</code>, you also need to maintain a corresponding list of human-readable names like <code class="highlighter-rouge">TwoOrMoreCount</code>. If I were writing a peer-reviewed research paper, I would be grateful for the huge amount of detailed breakdowns and the API access, but for a semester-long student project in a class focused on modeling, it’s too much.</p>

<h2 id="using-my-network">Using my network</h2>

<p>When I asked on Slack, several folks sent me files they had created using the APIs (thanks, <a href="https://twitter.com/dataandme">Mara</a> and Adam!), but of course they didn’t have all the variables I really wanted. And, while I’m grateful to my supportive social media network, I know not everyone has that!</p>

<h2 id="user-interfaces">User interfaces</h2>

<p>I had been expecting to be able to find a bunch of GitHub repos full of cleaned up data like the stuff Mara and Adam sent to me on Slack. It seems like people don’t really do that, or if they do it’s not documented in such a way that it is findable. But, <a href="https://twitter.com/ryan_boyer2">Ryan</a> pointed me to the <a href="http://www.socialexplorer.com/">Social Explorer</a>, an online tool mostly designed for making pretty maps online, that includes a Tables functionality that is almost exactly what I was looking for!</p>

<p><a class="thumb" href="http://www.socialexplorer.com/tables/C2010"><img src="https://www.amelia.mn/img/SocialExplorer.png" class="img-responsive" alt="Variable description'" /></a></p>

<p>It allows you to select your geography, then you can search by keyword or scroll through a manageable list of variable names and add them to a custom table. You can preview the data (it looks like states will be the variables, but never fear, this changes in the download), then choose the format you want to export it in. Other than a slight loss of reproducibility, the only drawback in my mind is that the variable names are still unintelligible, so you have to also download a data dictionary, but it <em>makes you a custom dictionary</em> based on the variables you chose so you don’t have to wade through the entire thing!</p>

<p>It looks like the Tables functionality is mostly for “premium” users, which is too bad, but Smith (like many other academic institutions) has a site license.</p>

<p>Are there other resources out there I have missed? Why is this such a hard problem? I’d love to hear from you.</p>

			</div>
		
<div id="disqus_thread"></div>

<script>
/**
* RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
* LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
*/
/**
var disqus_config = function () {
this.page.url = "https://www.amelia.mn/blog/teaching/2016/11/16/CensusRant.html"; // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = "/blog/teaching/2016/11/16/CensusRant.html"; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/

(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');

s.src = '//lettersfromayoungstatistician.disqus.com/embed.js';

s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>

<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

			
		</div>
		<div class="col-md-4">			
		<h4>Recent posts</h4>
			<ul>
 			
    		<li>
      		<a href="https://www.amelia.mn/blog/teaching/2018/03/20/Wikipedia-in-the-classroom.html">Wikipedia in the classroom: Gender, argh</a>
    		</li>
  			
    		<li>
      		<a href="https://www.amelia.mn/blog/conferences/2018/02/11/Dagstuhl-reflections.html">Dagstuhl reflections</a>
    		</li>
  			
    		<li>
      		<a href="https://www.amelia.mn/blog/conferences/2018/02/11/More-guys.html">More guys</a>
    		</li>
  			
    		<li>
      		<a href="https://www.amelia.mn/blog/conferences/2018/02/11/Scientists-Programming.html">Scientists Programming</a>
    		</li>
  			
    		<li>
      		<a href="https://www.amelia.mn/blog/teaching/2018/02/11/Syntax-comparison.html">R syntax comparison</a>
    		</li>
  			
    		<li>
      		<a href="https://www.amelia.mn/blog/conferences/2017/12/19/On-Microaggressions.html">On microaggressions</a>
    		</li>
  			
    		<li>
      		<a href="https://www.amelia.mn/blog/misc/2017/01/13/Amanda.html">What are the chances my name is Amanda?</a>
    		</li>
  			
    		<li>
      		<a href="https://www.amelia.mn/blog/teaching/2016/11/16/CensusRant.html">Census data: A rant</a>
    		</li>
  			
    		<li>
      		<a href="https://www.amelia.mn/blog/teaching/2016/10/19/GradSchool.html">Statistics graduate school advice</a>
    		</li>
  			
    		<li>
      		<a href="https://www.amelia.mn/blog/misc/2016/06/23/Listservs.html">Worth adding to your inbox</a>
    		</li>
  			
			</ul></div>
		<div class="row">&nbsp;</div>
</div>


   <footer>
      <div class="container">
        <p class="text-muted credit">Copyright &copy; 2018 Amelia McNamara. All Rights Reserved.</p>
      </div>
    </footer>
 <!-- Start of StatCounter Code for Default Guide -->
<script type="text/javascript">
  var sc_project=8403591; 
  var sc_invisible=1; 
  var sc_security="445c0f52"; 
  var scJsHost = (("https:" == document.location.protocol) ?
  "https://secure." : "http://www.");
</script>
<script type="text/javascript"
  src="http://www.statcounter.com/counter/counter.js"></script>
<noscript><div class="statcounter"><a title="web stats"
  href="http://statcounter.com/free-web-stats/"
  target="_blank"><img class="statcounter"
  src="https://c.statcounter.com/8403591/0/445c0f52/1/"
  alt="web stats"></a></div></noscript>
<!-- End of StatCounter Code for Default Guide -->

    <!-- /container -->


    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://www.amelia.mn/dist/js/jquery.min.js"></script>
    <script src="https://www.amelia.mn/dist/js/bootstrap.min.js"></script>
     <script src="https://www.amelia.mn/dist/js/Repo.js/repo.js"></script>
    <script type="text/javascript">
	$('.tooltip-test').tooltip()
	$('#collapseOne').collapse("hide");
	$('#repo').repo({ user: 'AmeliaMN', name: '1000tweets' });
	$('.more').click(function(){
    	$(this).text(function(i,old){
        	return old=='read less' ?  'read more' : 'read less';
    	});
    	$(this).blur();
	});
	$('.code').click(function(){
    	$(this).text(function(i,old){
        	return old=='hide code' ?  'view code' : 'hide code';
    	});
    	$(this).blur();
	});
	</script>
    
  </body>
</html>