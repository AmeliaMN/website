<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Consistency is key: A case study in R Syntaxes</title>
    <meta charset="utf-8" />
    <meta name="author" content="Amelia McNamara, PhD" />
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <script src="libs/twitter-widget/widgets.js"></script>
    <script src="https://kit.fontawesome.com/040465c08e.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="css/my-fonts.css" type="text/css" />
    <link rel="stylesheet" href="css/my-theme.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">





class: title-slide, left, top
background-image: url(img/comments.png)
background-size: contain
background-position: bottom left 




# Consistency is key: A case study in R Syntaxes

### Amelia McNamara, PhD
### Assistant Professor of Computer &amp; Information Sciences
### University of St Thomas&lt;br&gt;St Paul, MN, USA

[&lt;svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"&gt;&lt;/path&gt;&lt;/svg&gt; @AmeliaMN](https://twitter.com/AmeliaMN)  
[&lt;svg viewBox="0 0 496 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"&gt;&lt;/path&gt;&lt;/svg&gt; AmeliaMN](http://www.github.com/AmeliaMN)  
slides online at [amelia.mn/syntax](http://www.amelia.mn/syntax/index.html)
video recording of talk [on YouTube](https://www.youtube.com/watch?v=aq5SrjXZDy4)


???

Hi, I'm Amelia McNamara. I'm an assistant professor at the University of St Thomas in Minnesota. I tweet at AmeliaMN, which is a double entendre because my last name is McNamara and I live in Minnesota. 

---
background-image: url(img/mpls-stp-8.5x11-DakotaMap.jpg)
background-size: cover
background-position: top left


.footnote[
 Dakota landmap by [Marlena Myles](https://marlenamyl.es/) 
]

???

Even though we're at a virtual conference, I want us to take a moment to consider the physical space we are each in, and the history of that space. The United States is built on land forcibly taken from Native Americans, and where I am physically located is no different. What is now called Minneapolis and St Paul was originally Dakota land, and continues to have a vibrant Native community. 

I chose this beautiful map of sites in the Twin Cities, labeled in the Dakota language, to show you where I'm physically grounded, and the idea of language is one I'm going to take into my talk.

---


.pull-left[
<blockquote class="twitter-tweet" data-width="550" data-lang="en" data-dnt="true" data-theme="light"><p lang="en" dir="ltr">I did get a photo of just me blending into the hex wall. <a href="https://twitter.com/hashtag/rstudioconf?src=hash&amp;ref_src=twsrc%5Etfw">#rstudioconf</a> <a href="https://twitter.com/hashtag/rstats?src=hash&amp;ref_src=twsrc%5Etfw">#rstats</a> <a href="https://twitter.com/hashtag/tidyverse?src=hash&amp;ref_src=twsrc%5Etfw">#tidyverse</a><br><br>ðŸ“¸ <a href="https://twitter.com/ijlyttle?ref_src=twsrc%5Etfw">@ijlyttle</a> <a href="https://t.co/MJdZMK5idY">pic.twitter.com/MJdZMK5idY</a></p>&mdash; Amelia McNamara (@AmeliaMN) <a href="https://twitter.com/AmeliaMN/status/1223042166580101120?ref_src=twsrc%5Etfw">January 31, 2020</a></blockquote>

]
.pull-right[
# I am a massive R nerd. 
]

---
One of the killer apps that makes R so appealing when you're teaching reproducibility is RMarkdown. RMarkdown is a variant of Markdown.

.footnote[Learn [RMarkdown](https://rmarkdown.rstudio.com/)]

.pull-left[
```
# Pound signs make titles
```
Text is just text.

````
```{r}
# code gets executed
library(palmerpenguins)
library(ggplot2)
data(penguins)
ggplot(penguins) + geom_histogram(aes(x=bill_length_mm))
```
````
]

.pull-right[
### Pound signs make titles
Text is just text.

```r
# code gets executed
library(palmerpenguins)
library(ggplot2)
data(penguins)
ggplot(penguins) + geom_histogram(aes(x=bill_length_mm))
```

&lt;img src="index_files/figure-html/unnamed-chunk-2-1.png" width="80%" /&gt;
]


---
class: center, middle
# This talk is not about RMarkdown ðŸ˜­

---
class: center, middle
# But, it is about R! ðŸŽ‰

--

# Specifically, about teaching R

---
# Speaking R

.center[
&lt;iframe width="800" height="500"  src="https://www.youtube.com/embed/ckW9sSdIVAc?start=676" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen&gt;&lt;/iframe&gt;
]

.footnote[[Speaking R](https://www.youtube.com/watch?v=ckW9sSdIVAc&amp;t=676s), useR! 2020 keynote by Amelia McNamara
]

???
Reading code out loud is important for learners

---
## Programming syntax/dialect/domain specific language (DSL)

&gt; In programming, syntax refers to the rules that specify the correct combined sequence of symbols that can be used to form a correctly structured program using a given programming language. Programmers communicate with computers through the correctly structured syntax, semantics and grammar of a programming language.

## Most programming languages only have one correct syntax. R has many!


.footnote[Definition via [techopedia](https://www.techopedia.com/definition/3959/syntax)]

---
name: cheatsheet
class: center, middle
background-image: url(img/Syntax-cheatsheet.jpg)
background-size: contain

.footnote[
Syntax cheatsheet available from the RStudio [contributed cheatsheets](https://rstudio.com/resources/cheatsheets/#contributed-cheatsheets) page
]

---
class: middle
![Portion of syntax cheatsheet showing how to do summary statistics in all three R syntaxes](img/Syntax-cheatsheet-zoomed.jpg)
.footnote[
Syntax cheatsheet available from the RStudio [contributed cheatsheets](https://rstudio.com/resources/cheatsheets/#contributed-cheatsheets) page
]

???

Lots of debate in the stat ed community

Of course, practitioners really mix and match the syntaxes shown here, and more, when they are working. But, this has been useful to show students which "column" we are working in, and what the other approaches are. 

I'm interested in how the different syntaxes may impact learning, and whether they lead to different conceptions of data. 


---
# Palmer Penguins


```r
library(palmerpenguins)
```

&lt;img src="img/lter_penguins.png" width="50%" /&gt;




.footnote[[Penguin data](https://github.com/allisonhorst/palmerpenguins) and [penguin art](https://github.com/allisonhorst/palmerpenguins/tree/master/man/figures) by [Allison Horst](https://twitter.com/allison_horst)
]




---
# Summary statistics three ways

**base**

```r
mean(penguins$body_mass_g[penguins$species == "Adelie"])
mean(penguins$body_mass_g[penguins$species == "Chinstrap"])
mean(penguins$body_mass_g[penguins$species == "Gentoo"])

tapply(penguins$body_mass_g, penguins$species, mean)
```

**formula**

```r
mean(body_mass_g ~ species, data = penguins)
```

**tidyverse**

```r
penguins %&gt;%
  group_by(species) %&gt;%
  summarize(mean(body_mass_g))
```


???
The GAISE guidelines say "Give students experience with multivariable thinking." [GAISE guidelines](https://www.amstat.org/asa/education/Guidelines-for-Assessment-and-Instruction-in-Statistics-Education-Reports.aspx), for PreK-12, and college. Harder in base!

---
# Scatterplot three ways

**base**

```r
plot(penguins$flipper_length_mm, penguins$bill_length_mm)
```

**formula**

```r
xyplot(bill_length_mm ~ flipper_length_mm, data = penguins)

gf_point(bill_length_mm ~ flipper_length_mm, data = penguins)
```

**tidyverse**

```r
ggplot(penguins) +
  geom_point(aes(x = flipper_length_mm, y = bill_length_mm))
```


---
# Sets of scatterplots three ways


**base**

```r
par(mfrow = c(1, 3))
plot(penguins$flipper_length_mm[penguins$species == "Adelie"], penguins$bill_length_mm[penguins$species == "Adelie"])
plot(penguins$flipper_length_mm[penguins$species == "Chinstrap"], penguins$bill_length_mm[penguins$species == "Chinstrap"])
plot(penguins$flipper_length_mm[penguins$species == "Gentoo"], penguins$bill_length_mm[penguins$species == "Gentoo"])
# apply solution?
```

**formula**

```r
gf_point(bill_length_mm ~ flipper_length_mm | species, data = penguins)
```

**tidyverse**

```r
ggplot(penguins, aes(x = flipper_length_mm, y = bill_length_mm)) +
  geom_point() +
  facet_grid(~species)
```

---
&lt;div class="figure"&gt;
&lt;img src="img/Quorum.png" alt="Figure from Stefik's paper, comparing Quorum, Perl, Randomo, and Python code for the same task" width="95%" /&gt;
&lt;p class="caption"&gt;Figure from Stefik's paper, comparing Quorum, Perl, Randomo, and Python code for the same task&lt;/p&gt;
&lt;/div&gt;



.footnote[C-style languages (Perl, Java) were no better than Randomo, but non-C-style (Quorum, Python, Ruby) were. &lt;br&gt; Andreas Stefik and Susanna Siebert.  An Empirical Investigation into Programming Language Syntax. [ACM Transactions on Computing Education, Volume 13 Number 4, 2013](https://dl.acm.org/doi/10.1145/2534973) ]

???

For this article, we conducted **four empirical studies on programming language syntax** as part of a larger analysis [...] two surveys [...] on the intuitiveness of syntax,  two studies on the accuracy rates of novices using a total of six programming languages: Ruby, Java, Perl, Python, Randomo, and Quorum. Randomo was designed by randomly choosing some keywords from the ASCII table (a metaphorical placebo). To our surprise, **we found that languages using a more traditional C-style syntax** (both Perl and Java) **did not afford accuracy rates significantly higher than a language with randomly generated keywords**, **but that languages which deviate** (Quorum, Python, and Ruby) **did**.


---
class: big-bullet
# Choosing syntax

There is debate in the statistics education community about which syntax is best to teach, particularly for the "first course." All three syntaxes have their proponents, but the folks most interested in pedagogy tend to argue about whether formula or tidyverse is best. 

- the base first philosophy typically comes from people who were taught base first, often using [the man page for R](https://cran.r-project.org/doc/manuals/r-release/R-intro.html). Jeff Leek has [argued for the use of base graphics](https://simplystatistics.org/2016/02/11/why-i-dont-use-ggplot2/) but very few arguments for base are grounded in pedagogy
- tidyverse first philosophy, as espoused by David Robinson ([post](http://varianceexplained.org/r/teach-tidyverse/), and [talk](https://rstudio.com/resources/rstudioconf-2018/teach-the-tidyverse-to-beginners/)) and implicitly by Mine Cetinkaya-Rundel in her [Start with cake](https://datasciencebox.org/design-principles.html#start-with-cake) argument
- formula first philosophy, ["the third way"](https://www.r-bloggers.com/2017/07/options-for-teaching-r-to-beginners-a-false-dichotomy/), as laid out by Nick Horton. This philosophy led to the `mosaic` package, which Horton coauthored with [Randy Pruim](http://www.mosaic-web.org/ggformula/articles/ggformula-blog.html) and [Danny Kaplan](https://dtkaplan.github.io/SM2-bookdown/preface-to-this-electronic-version.html).  

---
class: big-bullet
# Choosing syntax

I've taught R **a lot**, including in introductory statistics labs. 
  - all base R
  - all formula
  - all tidyverse
    
When I teach a particular tool (or even just a particular syntax), I know I unconsciously modify the tasks to be easier to do in that tool. This makes it really hard to compare! 

---

.pull-left[
&lt;div class="figure"&gt;
&lt;img src="img/syntax_WWW1.png" alt="Figure from Rafalinski's paper, showing the setup to the experiment for the formula syntax, and an example of the task" width="150%" /&gt;
&lt;p class="caption"&gt;Figure from Rafalinski's paper, showing the setup to the experiment for the formula syntax, and an example of the task&lt;/p&gt;
&lt;/div&gt;
]
.pull-right[
&lt;div class="figure"&gt;
&lt;img src="img/syntax_WWW2.png" alt="Figure from Rafalinski's paper, showing a variety of student errors for the task in the previous figure." width="150%" /&gt;
&lt;p class="caption"&gt;Figure from Rafalinski's paper, showing a variety of student errors for the task in the previous figure.&lt;/p&gt;
&lt;/div&gt;
]



.footnote[Timothy Rafalski, P. Merlin Uesbeck, Cristina Panks-Meloney, Patrick Daleiden, William Allee, Amelia McNamara, Andreas Stefik. "A Randomized Controlled Trial on the Wild Wild West of Scientific Computing with Student Learners." [ICER '19: Proceedings of the 2019 ACM Conference on International Computing Education Research July 2019 Pages 239â€“247](https://dl.acm.org/doi/10.1145/3291279.3339421)
]

???
tl;dr they (we?) didn't find a difference between base, formula, and tidyverse syntaxes in completion time or number of errors (qualitative or interpreter)

When I look at the results, what I see is a lot of misunderstanding about variables and dataframes. 

No teaching!

 

---
class: big-bullet
# Another "experiment"
In Spring 2020, I had my first opportunity to teach introductory statistics labs at St Thomas. I couldn't decide which syntax to teach, so I thought  

![](img/both.png)

---
class: big-bullet
# Another "experiment"
I decided to teach one lab completely in formula syntax, the other entirely in tidyverse. 

At the University of St Thomas, lab assignments are standardized across all labs (JMP, SPSS, Minitab, Excel, and R). This forced me to write my "pre-labs" to accomplish exactly the same tasks in both syntaxes. 

Received IRB approval to study this "experiment." (St Thomas IRB #1605810-1). 

Of course, Spring 2020 was a mess of a semester. So, I repeated the "experiment" in Fall 2020 (IRB #1605810-2). I'm still working on the data analysis, but I've realized it was more of a case study than a true experiment. 

---
class: big-bullet
# Experimental protocol

The two labs were randomized to be tidyverse or formula (coin flip at the beginning of the semester). 

I attempted to switch the order in which I wrote the pre-labs and recorded the videos. This did not always happen. 

Students had to consent to participate in the pre- and post-tests. 

---
class: big-bullet
# Materials

If you want to dig into all the materials, there is a [page on my website](https://www.amelia.mn/STAT220labs) that summarizes the content in each of the labs, and links to the appropriate RMarkdown document as well as the YouTube video to follow along with. 

All the RMarkdown documents for the pre-labs are available on [my GitHub](https://github.com/AmeliaMN/STAT220-labs), and the videos are in two playlists, one for the  [formula labs](https://www.youtube.com/playlist?list=PLik6fAQnSI90bHK9fapPS-eZCUhgROh6S) and the other for the [tidyverse labs](https://www.youtube.com/playlist?list=PLik6fAQnSI93eBVuAONFBCVdOd7VFhKQX)

---
# Prior experience

&lt;img src="index_files/figure-html/unnamed-chunk-17-1.png" width="1152" /&gt;

???
C++, Java, Javascript, HTML

---
&lt;img src="index_files/figure-html/prepost-1.png" width="1152" /&gt;

???
Pre/post data not that useful. 
[1] "Analyses Easier"       "Overcome Problem"      "Programming Confident"
[4] "Programming Efficient" "Raw Data"              "Search Online"     

- "Using a programming language (like R) can make my analysis easier to reproduce"
- "While working on a programming project, if I get stuck, I can find ways of overcoming the problem"
- "I am confident in my ability to make use of programming software to work with data"
- "Using a programming language (like R) can make me more efficient at working with data"
- "Having access to the original, raw data is important to be able to repeat an analysis"
- "I know how to search for answers to my technical questions online"

---
class: big-bullet
# Other data

I also have data on viewership on YouTube for the period of my class, and [rstudio.cloud](https://rstudio.cloud) useage analytics. That analysis is still in progress. 



---
class: big-bullet
# Topics

Standardized labs meant I couldn't change what I asked based on syntax. The lab topics were:

- Describing data
- Categorical variables
- Quantitative variables 
- Correlation and regression
- Bootstrap intervals
- Randomization tests
- Inference for a single sample
- Inference for two samples
- ANOVA
- Chi-square
- Inference for regression

---
class: big-bullet
# Materials and guidance

- "all the R you need" cheatsheet for the semester
- weekly pre-lab, in RMarkdown
- pre-lab YouTube video
- real lab assignment, in RMarkdown
- synchronous class time on Zoom

???
Each week, the students were given an RMarkdown document that contained the "pre-lab" for the week. This pre-lab covered the material needed for the real lab (e.g., descriptive statistics and visualizations for one categorical variable). They were also sent a link to the associated YouTube video(s). Distribution was via Canvas. 


Students were expected to work through the pre-lab material asynchronously on their own. Ahead of the synchronous class time, another RMarkdown document with the real lab assignment would become available. 

During our scheduled synchronous time on Zoom, I would answer any questions from the pre-lab, help everyone at least load the data for the real lab, and give them any lab-specific tips. Typically this took less than 20 minutes. I was available for the rest of the synchronous time to answer questions live. Students would work in breakout rooms, or leave the Zoom meeting and come back if they had a question. 

Submitted labs needed to be "knitted" HTML files, not the source RMarkdown. Since we were working on rstudio.cloud, one source of confusion was moving files between the cloud and a student's local computer. 

---
# All the R you need: tidyverse

```r
library(Lock5Data)
library(tidyverse)
library(infer)

# one categorical
ggplot(penguins) + geom_bar(aes(x = species))

# two categorical
ggplot(penguins) + geom_bar(aes(x = island, fill = sex))
ggplot(penguins) + geom_bar(aes(x = island, fill = sex), position = "dodge")

# one categorical
penguins %&gt;%
  group_by(island) %&gt;%
  summarize(n = n()) %&gt;%
  mutate(prop = n / sum(n))

# two categorical
penguins %&gt;%
  group_by(island, sex) %&gt;%
  summarize(n = n()) %&gt;%
  mutate(prop = n / sum(n))
```

---
# All the R you need: formula


```r
library(Lock5Data)
library(mosaic)
library(ggformula)

# one categorical
gf_bar(~species, data = penguins)

# two categorical
gf_bar(~species, fill = ~sex, data = penguins)
gf_bar(~species, fill = ~sex, data = penguins, position = "dodge")

# one categorical
tally(~island, data = penguins, format = "proportion")

# two categorical
tally(~island | sex, data = penguins, format = "proportion")
```

---
# Bootstrap: tidyverse

.pull-left[

```r
library(tidyverse)
library(infer)
boot &lt;- penguins %&gt;%
  specify(response = flipper_length_mm) %&gt;%
  generate(reps = 1000, type = "bootstrap") %&gt;%
  calculate(stat = "mean")
ggplot(boot) + geom_histogram(aes(x = stat))
```
]
.pull-right[
&lt;img src="index_files/figure-html/tidyboot-out-1.png" width="504" /&gt;

]

---
# Bootstrap: formula
.pull-left[

```r
library(mosaic)
boot &lt;- do(1000) * mean(~flipper_length_mm,
  data = resample(penguins), na.rm = TRUE,
)
gf_histogram(~mean, data = boot)
```
]
.pull-right[
&lt;img src="index_files/figure-html/formulaboot-out-1.png" width="504" /&gt;

]

---
class: big-bullet
# formula: what was easy?
Introducing `lm()`, `aov()`, `chisq.test()`, etc after students were familiar with `mean()`, `cor()`, `gf_point()`, etc. (thanks, `mosaic` and `ggformula`!)


```r
mean(bill_length_mm ~ island, data = penguins, na.rm = TRUE)
cor(bill_length_mm ~ body_mass_g, data = penguins, use = "complete.obs")
gf_point(bill_length_mm ~ body_mass_g, data = penguins)
lm(bill_length_mm ~ body_mass_g, data = penguins)
aov(bill_length_mm ~ island, data = penguins)
```

Inference using distributional approximations, `prop.test()`, `t.test()`

```r
prop.test(sex ~ island, data = penguins)
t.test(body_mass_g ~ sex, data = penguins)
```

---
class: big-bullet
# formula: what was hard?
Dealing with `NA` values

```r
mean(bill_length_mm ~ island, data = penguins, 
     na.rm = TRUE)
cor(bill_length_mm ~ body_mass_g, data = penguins, 
    use = "complete.obs")
```


```r
mosaic::prop.test(sex~island, data = penguins)
```

```
## Error: sex has 3 levels (including NA).  Only 2 are allowed.
```

Data wrangling. Nothing specifically in formula syntax to do this, used `dplyr` verbs without the pipe,

```r
filter(penguins,  body_mass_g&gt;6000)
```

---
class: big-bullet
# formula: what was hard?

Getting long variable names correct.


```r
lm(highest_year_of_school_completed ~ highest_year_school_completed_spouse,
  data = GSS
)
```
    
---
class: big-bullet
# tidyverse: what was easy? 
Explaining concepts from bootstrap and randomization (thanks, `infer`!)


```r
penguins %&gt;%
  specify(response = flipper_length_mm) %&gt;%
  generate(reps = 1000, type = "bootstrap") %&gt;%
  calculate(stat = "mean")
```

Dealing with `NA` values


```r
penguins %&gt;%
  drop_na(bill_depth_mm) %&gt;%
  summarize(
    mean = mean(bill_depth_mm),
    median = median(bill_depth_mm))
```

---
class: big-bullet
# tidyverse: what was easy? 

Data wrangling when it came to end-of semester projects


```r
penguins %&gt;%
  drop_na(island) %&gt;%
  filter(island != "Biscoe") %&gt;%
  t_test(response = bill_depth_mm, explanatory = island)
```


---
class: big-bullet
# tidyverse: what was hard?
Summary statistics

```r
penguins %&gt;%
  group_by(island) %&gt;%
  summarize(n = n()) %&gt;%
  mutate(prop = n / sum(n))

penguins %&gt;%
  drop_na(bill_depth_mm) %&gt;%
  summarize(
    mean = mean(bill_depth_mm),
    median = median(bill_depth_mm))
```

---
class: big-bullet
# tidyverse: what was hard?

Explaining the difference between the `%&gt;%` and `+` operators

```r
penguins %&gt;%
  group_by(island) %&gt;%
  summarize(n = n()) %&gt;%
  mutate(prop = n / sum(n))

ggplot(penguins) + geom_bar(aes(x = island))
```

---
class: big-bullet
# tidyverse: what was hard?
Inconsistency when we got to modeling, `lm()` and `aov()`

```r
penguins %&gt;%
  group_by(island) %&gt;%
  summarize(mean(bill_length_mm))

penguins %&gt;%
  drop_na(bill_length_mm, body_mass_g) %&gt;%
  summarize(cor(bill_length_mm, body_mass_g))

lm(bill_length_mm ~ body_mass_g, data = penguins)
aov(bill_length_mm ~ island, data = penguins)
```

---
class: big-bullet
# tidyverse: what was hard?
Inference using distributional approximations. When I taught the class in spring 2020, `infer` had `chisq_test()`, but not `prop_test()` or `t_test()`. By fall 2020, `prop_test()` and `t_test()` were there!  But, [I found even more edge cases](https://github.com/tidymodels/infer/issues/343). Looks like that issue has now been closed.  

Tab completion for `infer` related things, 


```r
ggplot(boot) + geom_histogram(aes(x = stat))
```



---
class: big-bullet
# overall
## easy

- explaining RMarkdown
- debugging with hands off the keyboard (even after moving online!)

## hard

- **variables** Students would struggle to understand that `species` was the variable, not `Adelie`, `Chinstrap` and `Gentoo` (levels). 
- moving files from a local computer to RStudio Cloud
- filepaths
- students using the internet to troubleshoot (too much inconsistency online)

???
Overall, the formula syntax felt more consistent. The folks who work on mosaic, ggformula, etc., have made sure the entire introductory statistics curriculum can be accomplished using that syntax. Those students didn't have to see any dollar signs, and almost every single thing they saw used a formula. 

The tidyverse syntax feels more "useful" to me (bigger use in the wider community), but isn't quite ready for primetime when it comes to the entire intro stats curriculum. 

But, I didn't end up deciding that one was "better" and I'm going to teach both again in the fall. 

---

&lt;img src="index_files/figure-html/unnamed-chunk-34-1.png" width="1152" /&gt;

---
&lt;img src="index_files/figure-html/unnamed-chunk-35-1.png" width="1152" /&gt;

---

&lt;img src="index_files/figure-html/unnamed-chunk-36-1.png" width="1152" /&gt;

---
class: big-bullet
# Why or why not?

- "I've heard that formula was more straightforward"
- "I thought the syntax that I learned worked well"
- "I really enjoyed tidyverse, it was super easy to learn, and I liked the simplicity of the syntax" 
- "Tidy, is well tidy. When looking online the other syntax seemed more complex/abnormal"

- "I have no idea what the differences are, so I don't really know how to answer this question."
- "I'm not sure of the difference and I had 0 experience of coding or using anything like R so I didn't have a preference as to which one I learned."
- "I'm not sure I wish we got to experience both so we could compare, maybe learn one for one half of the semester and the other for the other half?"

---
class: big-bullet
# If I could do it over again

Maybe show the students some of the other syntax? 

~~"I wish we got to experience both so we could compare, maybe learn one for one half of the semester and the other for the other half?"~~ I wouldn't do this! But, could have shown them a little in the survey... 

Ask better questions in my survey. 



---
class: big-bullet
# So what? 

I'm still not sure which syntax I would recommend people to use. 

Overall, the formula syntax felt more consistent. The folks who work on `mosaic` and `ggformula` have made sure the entire introductory statistics curriculum can be accomplished using that syntax. Those students didn't have to see any dollar signs, and almost every single thing they saw used a formula. 

The `tidyverse` syntax feels more "useful" to me (bigger use in the wider community), but it hasn't been given the same level of thought when it comes to the entire intro stats curriculum. 

---
class: center, middle

# Be consistent!
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="libs/remark-latest.js"></script>
<script>var slideshow = remark.create({
"slideNumberFormat": "%current% of %total%",
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false,
"ratio": "16:9",
"output": null
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
